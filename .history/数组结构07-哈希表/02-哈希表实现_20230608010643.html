<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>哈希表实现</title>
</head>
<body>
<script>
     
     //  封装哈希表类
     function HashTable () {
        // 属性
        this.storage = []
        this.count = 0
        this.limit = 7

        // 方法
        // 哈希函数
        HashTable.prototype.hashFunc = function  (str,size) {
            // 1. 定义hashCode变量
            let hashCode = 0

            // 2. 霍纳算法，来计算hashCode的值
            // cats => Unicode编码
            for (let i = 0; i < str.length; i++) {
                hashCode = 37 * hashCode + str.charCodeAt(i)
            }

            // 3. 取余操作
            let index = hashCode % size
            
            return index
        }

        // 插入&修改操作
        HashTable.prototype.put = function (key,value) {
            // 1. 根据key获取对应的index
            let index = this.hashFunc(key,this.limit)

            // 2. 根据index取出对应的bucket
            let bucket = this.storage[index]

            // 3. 判断该bucket是否为null
            if (bucket == null) {
                bucket = []
                this.storage[index] = bucket
            } 

            // 4. 判断是否是修改数据
            for (let i = 0; i < bucket.length; i++) {
                let tuple = bucket[i]
                if (tuple[0] == key) {
                    tuple[1] = value
                    return
                }
            }

            // 5. 进行添加操作
            bucket.pust([key,value]) 
                this.count++
        }

     }
</script>
</body>
</html>